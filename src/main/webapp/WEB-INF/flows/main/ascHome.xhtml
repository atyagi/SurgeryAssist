<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:p="http://primefaces.org/ui"
				template="/WEB-INF/layouts/post-login.xhtml">

<ui:define name="tabs">
	<li class="active"><a href="#home" data-toggle="tab">Home</a></li>
	<li><h:form><p:commandLink action="inputAvailability">Calendar</p:commandLink></h:form></li>
	<li><a href="#upload" data-toggle="tab">Upload</a></li>
	<li><a href="#profile" data-toggle="tab">Profile</a></li>
</ui:define>

<ui:define name="content">
<div id="home" class="tab-pane active flip">
	<div style="display: none;">
		<h:form id="goToInputAvailability">
			<p:commandButton action="inputAvailability" value="Add New Availabilities" />
		</h:form>
	</div>
	<div class="span12">
		<h2>Welcome!</h2>
		<hr />
		<div class="row">
			<div class="span8">
				<h3>Upcoming Reservations</h3>
				<ul class="nav nav-pills">
					<li class="active">
						<a href="#confirmedTab" data-toggle="tab">Scheduled</a>
					</li>
					<li>
						<a href="#pendingTab" data-toggle="tab">Pending</a>
					</li>
				</ul>
				<div class="row">
					<div class="span4">
						<h:form id="searchNavForm_tab1">
							<p:commandButton id="searchNavCommandButton_tab1" action="confirmBookings" value="Accept Bookings" 
								styleClass="btn btn-block" />
						</h:form>
					</div>
					<div class="span4">
						<h:form id="cancelButtonForm">
							<p:commandButton id="cancelButton" action="cancelAvailability" value="Cancel Availabilities" styleClass="btn btn-block"/>
						</h:form>
					</div>
				</div>
				<div class="tab-content">
					<div class="tab-pane active" id="confirmedTab">
						<h:form id="confirmedDataForm">
	
							<p:dataTable id="confirmedDataTable" value="#{homepageData.confirmedBookings}"
								var="booking" selectionMode="single" selection="#{homepageData.selectedBooking}"
								rowKey="#{booking.bookingId}">
								
								<p:ajax event="rowSelect" listener="#{homepageData.onRowSelect}"   
	                   				update=":bookingDialogDisplay" oncomplete="bookingDialog.show()" /> 
	
								<p:column id="ascName" headerText="ASC">
									<h:outputText
										value="#{booking.bookingLocationId.userInfoId.firstName}" />
								</p:column>
								<p:column id="patientName" headerText="Patient">
									<h:outputText value="#{booking.patientId.firstName}" />
								</p:column>
								<p:column id="dateColumn" headerText="Date">
									<h:outputText id="date"
										value="#{booking.timeAvailabilityId.availabilityId.dateOfAvailability.time}">
										<f:convertDateTime type="date" timeStyle="default" />
									</h:outputText>
								</p:column>
								<p:column id="timeColumn" headerText="Time">
									<h:outputText id="time"
										value="#{booking.timeAvailabilityId.startTime.time}">
										<f:convertDateTime type="time" timeStyle="default" />
									</h:outputText>
								</p:column>
							</p:dataTable>
						</h:form>
					</div>
					<div class="tab-pane" id="pendingTab">
						<h:form id="pendingDataForm">
							<p:dataTable id="pendingDataTable" value="#{homepageData.pendingBookings}"
								var="booking" selectionMode="single" selection="#{homepageData.selectedBooking}"
								rowKey="#{booking.bookingId}">
								
								<p:ajax event="rowSelect" listener="#{homepageData.onRowSelect}"   
	                   				update=":bookingDialogDisplay" oncomplete="bookingDialog.show()" /> 
	
								<p:column id="ascName" headerText="ASC">
									<h:outputText
										value="#{booking.bookingLocationId.userInfoId.firstName}" />
								</p:column>
								<p:column id="patientName" headerText="Patient">
									<h:outputText value="#{booking.patientId.firstName}" />
								</p:column>
								<p:column id="dateColumn" headerText="Date">
									<h:outputText id="date"
										value="#{booking.timeAvailabilityId.availabilityId.dateOfAvailability.time}">
										<f:convertDateTime type="date" timeStyle="default" />
									</h:outputText>
								</p:column>
								<p:column id="timeColumn" headerText="Time">
									<h:outputText id="time"
										value="#{booking.timeAvailabilityId.startTime.time}">
										<f:convertDateTime type="time" timeStyle="default" />
									</h:outputText>
								</p:column>
							</p:dataTable>
						</h:form>
					</div>
				</div>
				<p:dialog id="bookingDialog" widgetVar="bookingDialog" modal="true" resizable="false" closable="true" width="470">
					<h:panelGroup id="bookingDialogDisplay">
						<h2>
							<h:outputText value="Booking Details" />
						</h2>
						<table>
							<tbody>
								<tr>
									<td><h:outputText value="ASC" /></td>
									<td>
										<h:outputText value="#{homepageData.selectedBooking.bookingLocationId.userInfoId.firstName}" />
									</td>
								</tr>
								<tr>
									<td><h:outputText value="Procedure" /></td>
									<td>
										<h:outputText value="#{homepageData.selectedBooking.patientId.surgeryTypeCode.surgeryFullName}" />
									</td>
								</tr>
								<tr>
									<td><h:outputText value="Patient" /></td>
									<td>
										<h:outputText value="#{homepageData.selectedBooking.patientId.firstName}" />
									</td>
								</tr>
								<tr>
									<td><h:outputText value="Date" /></td>
									<td>
										<h:outputText id="date"
											value="#{homepageData.selectedBooking.timeAvailabilityId.availabilityId.dateOfAvailability.time}">
											<f:convertDateTime type="date" timeStyle="default" />
										</h:outputText>
									</td>
								</tr>
								<tr>
									<td><h:outputText value="Time" /></td>
									<td>
										<h:outputText id="time"
											value="#{homepageData.selectedBooking.timeAvailabilityId.startTime.time}">
											<f:convertDateTime type="time" timeStyle="default" />
										</h:outputText>
									</td>
								</tr>
							</tbody>
						</table>
					</h:panelGroup>
				</p:dialog>
			</div>
			<div class="span4">
				<h3>Priority Doctors</h3>
				<ul class="nav nav-pills">
					<li class="active">
						<a href="#recentTab" data-toggle="tab">Recent</a>
					</li>
					<li>
						<a href="#favoriteTab" data-toggle="tab">Favorite</a>
					</li>
				</ul>
				<div class="row">
					<div class="span2">
						<h:form id="editListedASCForm">
							<p:commandButton id="editListedASCButton" value="Edit List" styleClass="btn btn-block"/>
						</h:form>
					</div>
					<div class="span2">
						<h:form id="addNewFavoriteForm">
							<p:commandButton id="addNewFavoriteButton" value="+" styleClass="btn btn-block"/>
						</h:form>
					</div>
				</div>
				<div class="tab-content">
					<div class="tab-pane active" id="recentTab">
						<h:form id="recentDataForm">
							<p:dataTable id="recentDataTable" value="#{homepageData.recentASCs}"
								var="ASC" selectionMode="single" selection="#{homepageData.selectedASC}"
								rowKey="#{ASC.userID}" emptyMessage="Under Construction">
								
								<p:ajax event="rowSelect" listener="#{homepageData.onRowSelect}"   
	                   				update=":ASCDialogDisplay" oncomplete="ASCDialog.show()" /> 
	
								<p:column id="doctorName" headerText="Doctor">
									<h:outputText
										value="" />
								</p:column>
								
								<p:column id="procedureName" headerText="Procedure">
									<h:outputText
										value="" />
								</p:column>
							</p:dataTable>
						</h:form>
					</div>
					<div class="tab-pane" id="favoriteTab">
						<h:form id="favoriteDataForm">
							<p:dataTable id="favoriteDataTable" value="#{homepageData.favoriteASCs}"
								var="ASC" selectionMode="single" selection="#{homepageData.selectedASC}"
								rowKey="#{ASC.userID}" emptyMessage="Under Construction">
								
								<p:ajax event="rowSelect" listener="#{homepageData.onRowSelect}"   
	                   				update=":ASCDialogDisplay" oncomplete="ASCDialog.show()" /> 
	
								<p:column id="doctorName" headerText="Doctor">
									<h:outputText
										value="" />
								</p:column>
								
								<p:column id="procedureName" headerText="Procedure">
									<h:outputText
										value="" />
								</p:column>
							</p:dataTable>
						</h:form>
					</div>
				</div>
				<p:dialog id="ASCDialog" widgetVar="ASCDialog" modal="true" resizable="false" closable="true" width="470">
					<h:panelGroup id="ASCDialogDisplay">
						<h2>
							<h:outputText value="Booking Details" />
						</h2>
						<table>
							<tbody>
								<tr>
									<td><h:outputText value="ASC Name" /></td>
									<td>
										<h:outputText value="#{homepageData.selectedBooking.bookingLocationId.userInfoId.firstName}" />
									</td>
								</tr>
							</tbody>
						</table>
					</h:panelGroup>
				</p:dialog>
			</div>
		</div>
	</div>
</div>
<div id="upload" class="tab-pane flip">
	<div class="span6">
		<h3>Pending Requests</h3>
		<table class="table">
			<thead>
				<tr>
					<th>Surgeon</th>
					<th>Time</th>
					<th>Room</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>Harold Jones</td>
					<td>8:00 AM 3/18/13</td>
					<td>A503</td>
				</tr>
				<tr>
					<td>John Mark</td>
					<td>4:30 PM 5/5/13</td>
					<td>C611</td>
				</tr>
				<tr>
					<td>Amy Allen</td>
					<td>5:15 PM 5/8/13</td>
					<td>C412</td>
				</tr>
			</tbody>
		</table>
		<button class="btn btn-large btn-block">Create New
			Booking</button>
	</div>
	<div class="span6">
		<h3>Confirmed Requests</h3>
		<table class="table">
			<thead>
				<tr>
					<th>Surgeon</th>
					<th>Time</th>
					<th>Room</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>Artemis Fowl</td>
					<td>4:30 PM 5/5/13</td>
					<td>C611</td>
				</tr>
				<tr>
					<td>Jesse Mentz</td>
					<td>5:15 PM 5/8/13</td>
					<td>C412</td>
				</tr>
				<tr>
					<td>Mack Powers</td>
					<td>8:00 AM 3/18/13</td>
					<td>A503</td>
				</tr>
			</tbody>
		</table>
		<button class="btn btn-large btn-block">Cancel Booking</button>
	</div>
</div>
<div id="profile" class="tab-pane">
	<p>Howdy, I'm in Section 4.</p>
	<h:form>
	<p:growl id="messages" showDetail="true" />
	<p:schedule value="#{scheduleController.eventModel}" widgetVar="myschedule">
		<p:ajax event="dateSelect" listener="#{scheduleController.onDateSelect}" update="eventDetails" oncomplete="eventDialog.show()" />
		<p:ajax event="eventSelect" listener="#{scheduleController.onEventSelect}" update="eventDetails" oncomplete="eventDialog.show()" />
		<p:ajax event="eventMove" listener="#{scheduleController.onEventMove}" update="messages" />
		<p:ajax event="eventResize" listener="#{scheduleController.onEventResize}" update="messages" />
	</p:schedule>
	<p:dialog widgetVar="eventDialog" header="Event Details" showEffect="clip" hideEffect="clip">
		<h:panelGrid id="eventDetails" columns="2">
			<h:outputLabel for="title" value="Title:" />
			<p:inputText id="title" value="#{scheduleController.event.title}" required="true"/>
			<h:outputLabel for="from" value="From:" />
			<p:inputMask id="from" value="#{scheduleController.event.startDate}" mask="99/99/9999">
				<f:convertDateTime pattern="dd/MM/yyyy" />
			</p:inputMask>
			<h:outputLabel for="to" value="To:" />
			<p:inputMask id="to" value="#{scheduleController.event.endDate}" mask="99/99/9999">
				<f:convertDateTime pattern="dd/MM/yyyy" />
			</p:inputMask>
			<h:outputLabel for="allDay" value="All Day:" />
			<h:selectBooleanCheckbox id="allDay" value="#{scheduleController.event.allDay}" />
			<p:commandButton type="reset" value="Reset" />
			<p:commandButton value="Save" actionListener="#{scheduleController.addEvent}" oncomplete="myschedule.update();eventDialog.hide();"/>
		</h:panelGrid>
	</p:dialog>
</h:form>
</div>
</ui:define>
</ui:composition>